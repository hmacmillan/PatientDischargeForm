<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Discharge Form</title>
    <h:outputStylesheet library="css" name="styles.css"/>
</h:head>
<h:body>


    <p:panel header="Patient Discharge Form">

        <h:form id="patientDischargeForm">

            <p:selectBooleanCheckbox value="#{dischargeFormView.discharged}" widgetVar="dischargedBoolean"
                                     binding="#{dischargeFormView.selectBooleanCheckbox}"/>


            <p:panelGrid columns="2" columnClasses="twocolumn,twocolumn" styleClass="fullwidth">

                <p:panel header="Patient Details" id="patientDetailsPanel">

                    <p:outputLabel value="#{dischargeFormView.currentDischargeForm.patientDetails.printFullDeatails()}"
                                   styleClass="dischargeDetails"></p:outputLabel>
                    <br/>
                    <p:outputLabel
                            value="#{dischargeFormView.currentDischargeForm.patientDetails.patientAddress.address}"></p:outputLabel>

                </p:panel>


                <p:panel header="GP Details">

                    <p:outputLabel value="#{dischargeFormView.currentDischargeForm.patientDetails.gpPractice}"
                                   styleClass="dischargeDetails"></p:outputLabel>
                    <br/>
                    <p:outputLabel
                            value="#{dischargeFormView.currentDischargeForm.patientDetails.gpPracticeAddress.address}"></p:outputLabel>
                </p:panel>

            </p:panelGrid>


            <p:panel header="Discharge Details">

                <h:panelGrid styleClass="fullwidth" columns="3" columnClasses="threecolumn,threecolumn,threecolumn">

                    <h:panelGroup styleClass="dditem">

                        <p:outputLabel value="Admission Date"/><br/>
                        <p:outputLabel styleClass="dischargeDetails"
                                       value="#{dischargeFormView.currentDischargeForm.dischargeDetails.admissionDate}"
                                       converter="localDateConverter"/>
                    </h:panelGroup>

                    <h:panelGroup styleClass="dditem">
                        <p:outputLabel value="Estimated Discharge Date"/><br/>
                        <p:outputLabel styleClass="dischargeDetails"
                                       value="#{dischargeFormView.currentDischargeForm.dischargeDetails.estimatedDischargeDate}"
                                       converter="localDateConverter"/>
                    </h:panelGroup>

                    <h:panelGroup styleClass="dditem">
                        <p:outputLabel value="Discharge Date"/><br/>
                        <p:outputLabel styleClass="dischargeDetails"
                                       value="#{dischargeFormView.currentDischargeForm.dischargeDetails.dischargeDate}"
                                       converter="localDateConverter"/>

                    </h:panelGroup>

                    <h:panelGroup styleClass="dditem">
                        <p:outputLabel value="Discharge Specialty"/><br/>
                        <p:outputLabel styleClass="dischargeDetails"
                                       value="#{dischargeFormView.currentDischargeForm.dischargeDetails.dischargeSpecialty}"/>
                    </h:panelGroup>

                    <h:panelGroup styleClass="dditem">
                        <p:outputLabel value="Discharge Consultant"/><br/>
                        <p:outputLabel styleClass="dischargeDetails"
                                       value="#{dischargeFormView.currentDischargeForm.dischargeDetails.dischargeConsultant}"/>
                    </h:panelGroup>

                    <h:panelGroup styleClass="dditem">
                        <p:outputLabel value="Discharge Location"/><br/>
                        <p:outputLabel styleClass="dischargeDetails"
                                       value="#{dischargeFormView.currentDischargeForm.dischargeDetails.dischargeLocation}"/>
                    </h:panelGroup>

                    <h:panelGroup styleClass="dditem">
                        <p:outputLabel value="Discharge Destination"/><br/>
                        <p:outputLabel styleClass="dischargeDetails"
                                       value="#{dischargeFormView.currentDischargeForm.dischargeDetails.dischargeDestination}"/>
                    </h:panelGroup>

                    <h:panelGroup styleClass="dditem">

                        <p:outputLabel value="Discharge Destination Details"/><br/>
                        <p:outputLabel styleClass="dischargeDetails"
                                       value="#{dischargeFormView.currentDischargeForm.dischargeDetails.dischargeDestinationDetails}"/>
                    </h:panelGroup>


                </h:panelGrid>


            </p:panel>


            <p:panel header="Diagnoses" id="diagnosisPanel">

                <p:dataTable value="#{dischargeFormView.currentDischargeForm.diagnosisList}" var="diagnosis"
                             widgetVar="diagnosisTable">
                    <p:column headerText="Diagnosis Name">
                        <p:outputLabel value="#{diagnosis.diagnosisName}"/>
                    </p:column>

                    <p:column headerText="Diagnosis Detail">
                        <p:outputLabel value="#{diagnosis.diagnosisDetail}"/>
                    </p:column>

                    <f:facet name="footer">
                    <p:commandButton value="Add Diagnosis" onclick="PF('addDiagnosisDialogue').show()" actionListener="#{dischargeFormView.createNewDiagnosis()}" update="addDiagnosisForm:addDiagnosisPanel" />
                    </f:facet>

                </p:dataTable>

            </p:panel>


            <p:panel header="Operations/Procedures" id="proceduresPanel">
                <p:dataTable value="#{dischargeFormView.currentDischargeForm.procedureList}" var="procedure">
                    <p:column headerText="Procedure Name">
                        <p:outputLabel value="#{procedure.procedureName}"/>

                    </p:column>

                    <p:column headerText="Procedure Detail">
                        <p:outputLabel value="#{procedure.procedureDetail}"/>
                    </p:column>

                    <p:column headerText="Procedure Date">
                        <p:outputLabel value="#{procedure.procedureDate}" converter="localDateConverter"/>
                    </p:column>



                    <f:facet name="footer">
                        <p:commandButton value="Add Procedure" onclick="PF('addProcedureDialogue').show()" actionListener="#{dischargeFormView.createNewProcedure()}" update="addProcedureForm:addProcedurePanel" />
                    </f:facet>


                </p:dataTable>

            </p:panel>


            <p:panel header="Allergies" id="AllergiesPanel">
                <p:dataTable value="#{dischargeFormView.currentDischargeForm.allergyList}" var="allergy">
                    <p:column headerText="Substance">
                        <p:outputLabel value="#{allergy.substance}"/>

                    </p:column>

                    <p:column headerText="Reaction">
                        <p:outputLabel value="#{allergy.reaction}"/>
                    </p:column>

                    <p:column headerText="Source">
                        <p:outputLabel value="#{allergy.source}"/>
                    </p:column>

                    <p:column headerText="Date Recorded">
                        <p:outputLabel value="#{allergy.dateRecorded}" converter="localDateConverter"/>
                    </p:column>

                    <f:facet name="footer">
                        <p:commandButton value="Add Allergy" onclick="PF('addProcedureDialogue').show()" actionListener="#{dischargeFormView.createNewAllergy()}" update="addAllergyForm:addAllergyPanel" />
                    </f:facet>


                </p:dataTable>

            </p:panel>


            <p:panel header="Deleted Allergies" id="DeletedAllergiesPanel">

                <p:dataTable value="#{dischargeFormView.currentDischargeForm.deletedAllergyList}" var="deletedAllergy">
                    <p:column headerText="Substance">
                        <p:outputLabel value="#{deletedAllergy.substance}"/>

                    </p:column>

                    <p:column headerText="Reaction">
                        <p:outputLabel value="#{deletedAllergy.reaction}"/>
                    </p:column>

                    <p:column headerText="Source">
                        <p:outputLabel value="#{deletedAllergy.source}"/>
                    </p:column>

                    <p:column headerText="Date Recorded">
                        <p:outputLabel value="#{deletedAllergy.dateRecorded}" converter="localDateConverter"/>
                    </p:column>

                    <p:column headerText="Deletion Reason">
                        <p:outputLabel value="#{deletedAllergy.deletionReason}"/>
                    </p:column>


                    <f:facet name="footer">
                        <p:commandButton value="Add Medication" onclick="PF('addMedicationDialogue').show()" actionListener="#{dischargeFormView.createNewMedication()}" update="addMedicationForm:addMedicationPanel" />
                    </f:facet>

                </p:dataTable>

            </p:panel>


            <p:panel header="Medication" id="MedicationPanel">

                <p:dataTable value="#{dischargeFormView.currentDischargeForm.medicationList}" var="medication">

                    <p:column headerText="Description">
                        <p:outputLabel value="#{medication.description}"/>

                    </p:column>

                    <p:column headerText="Dose">
                        <p:outputLabel value="#{medication.dose}"/>
                    </p:column>

                    <p:column headerText="Instructions">
                        <p:outputLabel value="#{medication.instructions}"/>
                    </p:column>

                    <p:column headerText="Duration">
                        <p:outputLabel value="#{medication.duration}"/>
                    </p:column>

                    <p:column headerText="Supply">
                        <p:outputLabel value="#{medication.supply}"/>
                    </p:column>

                    <p:column headerText="Other Supply">
                        <p:outputLabel value="#{medication.otherSupply}"/>
                    </p:column>

                    <p:column headerText="Dispensary">
                        <p:outputLabel value="#{medication.dispensary}"/>
                    </p:column>

                    <p:column headerText="Quantity">
                        <p:outputLabel value="#{medication.quantity}"/>
                    </p:column>

                </p:dataTable>

            </p:panel>


            <p:panel header="Discontinued Medicines" id="DiscontinuedMedicinesPanel">
                <p:dataTable value="#{dischargeFormView.currentDischargeForm.discontinuedMedicationList}"
                             var="discontinuedMedication">

                    <p:column headerText="Description">
                        <p:outputLabel value="#{discontinuedMedication.description}"/>

                    </p:column>

                    <p:column headerText="Instructions">
                        <p:outputLabel value="#{discontinuedMedication.instructions}"/>
                    </p:column>

                    <p:column headerText="Permanency">
                        <p:outputLabel value="#{discontinuedMedication.permanency}"/>
                    </p:column>

                    <p:column headerText="Discontinue Reason">
                        <p:outputLabel value="#{discontinuedMedication.discontinueReason}"/>
                    </p:column>

                </p:dataTable>

            </p:panel>


            <p:panel header="Medication Notes" id="MedicationNotesPanel">

                <p:inputTextarea value="#{dischargeFormView.currentDischargeForm.medicationComments}"
                                 styleClass="textAreaBox"/>

            </p:panel>


            <p:panel header="Communication to Primary Care" id="CommunicationtoPrimaryCarePanel">

                <p:inputTextarea value="#{dischargeFormView.currentDischargeForm.communicationToPrimaryCare}"
                                 styleClass="textAreaBox"/>
            </p:panel>

            <p:panel header="Actions for Primary Care" id="ActionsforPrimaryCarePanel">
                <p:inputTextarea value="#{dischargeFormView.currentDischargeForm.actionsRequiredByPrimaryCare}"
                                 styleClass="textAreaBox"/>
            </p:panel>

            <p:panel header="Follow Up Arrangements" id="FollowUpArrangementsPanel">

                <p:dataTable value="#{dischargeFormView.currentDischargeForm.followUpList}" var="followup">

                    <p:column headerText="Clinic">
                        <p:outputLabel value="#{followup.clinic}"/>

                    </p:column>

                    <p:column headerText="Doctor">
                        <p:outputLabel value="#{followup.doctor}"/>
                    </p:column>

                    <p:column headerText="Location">
                        <p:outputLabel value="#{followup.appointmentLocation}"/>
                    </p:column>

                    <p:column headerText="Appoinment Needed">
                        <p:outputLabel value="#{followup.appointmentNeeded}"/>
                    </p:column>

                    <p:column headerText="Appointment Date">
                        <p:outputLabel value="#{followup.appointmentDateTime}" converter="localDateTimeConverter"/>
                    </p:column>

                </p:dataTable>

            </p:panel>


            <p:panel header="Final Discharge Comments" id="FinalDischargeCommentsPanel">

                <p:inputTextarea value="#{dischargeFormView.currentDischargeForm.finalDischargeComments}"
                                 styleClass="textAreaBox"/>
            </p:panel>


            <p:panel header="Pharmacy" id="PharmacyPanel">

                <p:inputTextarea value="#{dischargeFormView.currentDischargeForm.pharmacyComment}"
                                 styleClass="textAreaBox"/>
            </p:panel>


            <p:panel header="Sign Off" id="SignOffPanel">


            </p:panel>


            <p:panel header="Audit Trail" id="AuditTrailPanel">


            </p:panel>

        </h:form>

    </p:panel>



    <p:dialog header = "Add Diagnosis" widgetVar="addDiagnosisDialogue" modal="true" appendTo="@(body)" fitViewport="true" width="500">
        <h:form id = "addDiagnosisForm">
            <p:panel id = "addDiagnosisPanel"  >
               <p:panelGrid columns="2">

                   <p:outputLabel value="Diagnosis"/>
                   <p:inputText value="#{dischargeFormView.diagnosisToAdd.diagnosisName}"/>

                   <p:outputLabel value="Diagnosis Detail"/>
                   <p:inputText value="#{dischargeFormView.diagnosisToAdd.diagnosisDetail}"/>

               </p:panelGrid>

                <p:commandButton value="Add" ajax="true" onclick="PF('addDiagnosisDialogue').hide()" update="patientDischargeForm:diagnosisPanel" actionListener="#{dischargeFormView.addNewDiagnosistoList()}"/>
                <p:commandButton value="Cancel" onclick="PF('addDiagnosisDialogue').hide()" />


            </p:panel>
        </h:form>
    </p:dialog>



    <p:dialog header = "Add Procedure" widgetVar="addProcedureDialogue" modal="true" appendTo="@(body)" fitViewport="true" width="500">
        <h:form id = "addProcedureForm">
            <p:panel id = "addProcedurePanel"  >
                <p:panelGrid columns="2">

                    <p:outputLabel value="Procedure"/>
                    <p:inputText value="#{dischargeFormView.procedureToAdd.procedureName}"/>

                    <p:outputLabel value="Procedure Detail"/>
                    <p:inputText value="#{dischargeFormView.procedureToAdd.procedureDetail}"/>

                    <p:outputLabel value="Procedure Date"/>
                    <p:calendar value="#{dischargeFormView.procedureToAdd.procedureDate}" converter="localDateConverter" pattern="dd/MM/yyyy"/>


                </p:panelGrid>

                <p:commandButton value="Add" ajax="true" onclick="PF('addProcedureDialogue').hide()" update="patientDischargeForm:proceduresPanel" actionListener="#{dischargeFormView.addNewProcedureToList()}"/>
                <p:commandButton value="Cancel" onclick="PF('addProcedureDialogue').hide()" />


            </p:panel>
        </h:form>
    </p:dialog>




    <p:dialog header = "Add Allergy" widgetVar="addAllergyDialogue" modal="true" appendTo="@(body)" fitViewport="true" width="500">
        <h:form id = "addAllergyForm">
            <p:panel id = "addAllergyPanel"  >
                <p:panelGrid columns="2">



                </p:panelGrid>

                <p:commandButton value="Add" ajax="true" onclick="PF('addAllergyDialogue').hide()" update="patientDischargeForm:allergyPanel" actionListener="#{dischargeFormView.addNewAllergyToList()}"/>
                <p:commandButton value="Cancel" onclick="PF('addAllergyDialogue').hide()" />


            </p:panel>
        </h:form>
    </p:dialog>


    <p:dialog header = "Add Medication" widgetVar="addMedicationDialogue" modal="true" appendTo="@(body)" fitViewport="true" width="500">
        <h:form id = "addMedicationForm">
            <p:panel id = "addMedicationPanel"  >
                <p:panelGrid columns="2">

                </p:panelGrid>

                <p:commandButton value="Add" ajax="true" onclick="PF('addMedicationDialogue').hide()" update="patientDischargeForm:medicationPanel" actionListener="#{dischargeFormView.addNewMedicationToList()}"/>
                <p:commandButton value="Cancel" onclick="PF('addMedicationDialogue').hide()" />

            </p:panel>
        </h:form>
    </p:dialog>




</h:body>
</html>
